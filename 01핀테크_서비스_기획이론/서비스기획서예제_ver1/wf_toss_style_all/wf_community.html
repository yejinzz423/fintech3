<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>WF-05 ì»¤ë®¤ë‹ˆí‹° í™”ë©´</title>
  <link rel="stylesheet" href="styles.css">

  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script crossorigin src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
</head>

<body>
<div class="mobile-container"><div id="root"></div></div>

<script type="text/babel" data-presets="react">

/** ê³µí†µ AppBar */
function AppBar({ title }) {
  return (
    <header className="appbar">
      <div className="appbar__title">{title}</div>
      <div className="appbar__actions">
        <button className="icon-button">ğŸ”</button>
        <button className="icon-button">ğŸ””</button>
      </div>
    </header>
  );
}

/** í•˜ë‹¨ íƒ­ ë°” ê³µí†µ ì»´í¬ë„ŒíŠ¸ */
function BottomNav({ active }) {
  const items = ["í™ˆ", "ë§ˆì¼“", "ë¼ì´ë¸Œ", "ì»¤ë®¤ë‹ˆí‹°", "ë§ˆì´"];

  return (
    <nav className="bottom-nav">
      {items.map((name) => (
        <button
          key={name}
          type="button"
          className={
            "bottom-nav__item" +
            (active === name ? " bottom-nav__item--active" : "")
          }
        >
          <span className="bottom-nav__label">{name}</span>
        </button>
      ))}
    </nav>
  );
}

/**
 * WF-05 ì»¤ë®¤ë‹ˆí‹° í™”ë©´
 * - FR-040 ê²Œì‹œê¸€ ëª©ë¡
 * - FR-041 ê²Œì‹œê¸€ ì‘ì„±
 * - FR-042 ê²Œì‹œê¸€ ê°„ë‹¨ ìƒì„¸(ë³¸ë¬¸ í¼ì¹¨)
 * - UI-006 ì»¤ë®¤ë‹ˆí‹° í™”ë©´ êµ¬ì„±
 */
function CommunityScreen() {
  const [posts, setPosts] = React.useState([
    {
      id: 1,
      title: "ETF ì´ˆë³´ ì§ˆë¬¸ë“œë¦½ë‹ˆë‹¤",
      author: "ì§€í˜„",
      content: "ETFëŠ” ë¬´ì—‡ë¶€í„° ê³µë¶€í•˜ë©´ ì¢‹ì„ê¹Œìš”?",
      time: "2ì‹œê°„ ì „",
    },
    {
      id: 2,
      title: "ì˜¤ëŠ˜ ê³µëª¨ì£¼ ê²½ìŸë¥  ë³´ì‹  ë¶„?",
      author: "íˆ¬ìì™•",
      content: "ì—ì½”ê·¸ë¦° ê²½ìŸë¥  ë¯¸ì³¤ë„¤ìš”ã…‹ã…‹",
      time: "1ì‹œê°„ ì „",
    },
  ]);

  const [openId, setOpenId] = React.useState(null);
  const [newTitle, setNewTitle] = React.useState("");
  const [newContent, setNewContent] = React.useState("");

  // ê¸€ ë“±ë¡ (FR-041)
  const submit = () => {
    if (!newTitle || !newContent) {
      alert("ì œëª©ê³¼ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
      return;
    }
    setPosts((prev) => [
      ...prev,
      {
        id: prev.length + 1,
        title: newTitle,
        author: "ìµëª…",
        content: newContent,
        time: "ë°©ê¸ˆ ì „",
      },
    ]);
    setNewTitle("");
    setNewContent("");
  };

  return (
    <div className="screen">
      <AppBar title="ì»¤ë®¤ë‹ˆí‹°" />

      <div className="screen__content">
        {/* FR-041: ê²Œì‹œê¸€ ì‘ì„± */}
        <section className="card">
          <h2>ê²Œì‹œê¸€ ì‘ì„±</h2>
          <input
            type="text"
            placeholder="ì œëª©"
            className="input"
            value={newTitle}
            onChange={(e) => setNewTitle(e.target.value)}
            style={{ marginTop: "8px" }}
          />

          <textarea
            placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"
            className="input"
            style={{ marginTop: "8px", height: "80px" }}
            value={newContent}
            onChange={(e) => setNewContent(e.target.value)}
          />

          <button
            className="btn"
            style={{ marginTop: "12px" }}
            onClick={submit}
          >
            ë“±ë¡í•˜ê¸°
          </button>
        </section>

        {/* FR-040: ê²Œì‹œê¸€ ëª©ë¡ */}
        <section className="card">
          <h2>ê²Œì‹œê¸€ ëª©ë¡</h2>

          <ul className="market-list">
            {posts.map((p) => (
              <li
                key={p.id}
                className="market-list__item"
                onClick={() => setOpenId(openId === p.id ? null : p.id)}
              >
                <div className="market-list__title">{p.title}</div>
                <div className="market-list__meta">
                  <span>{p.author}</span>
                  <span>{p.time}</span>
                </div>

                {/* FR-042: ê°„ë‹¨ ìƒì„¸(ë³¸ë¬¸ í¼ì¹¨) */}
                {openId === p.id && (
                  <p style={{ marginTop: "8px", color: "#374151" }}>
                    {p.content}
                  </p>
                )}
              </li>
            ))}
          </ul>

          <p
          style={{
            fontSize: "12px",
            color: "#6b7280",
            marginTop: "8px",
          }}
        >
          â€» í–¥í›„ ë²„ì „ì—ì„œëŠ” ì¸ê¸°/ë°˜ë³µ ì§ˆë¬¸ì— ëŒ€í•´
          AIê°€ ìœ ì‚¬ ì§ˆë¬¸Â·ë‹µë³€ì„ ì¶”ì²œí•˜ê³ , ê¸°ë³¸ ê°œë… ì„¤ëª… ì¹´ë“œë¥¼ í•¨ê»˜ ì œê³µí•©ë‹ˆë‹¤.
        </p>

        <button
          className="btn btn--secondary"
          style={{ marginTop: "8px" }}
          onClick={() => alert("AI Q&A ì¶”ì²œ(ì™€ì´ì–´í”„ë ˆì„ìš©)")}>
          ë¹„ìŠ·í•œ ì§ˆë¬¸ AIë¡œ ì°¾ì•„ë³´ê¸°
        </button>

        </section>
      </div>

      {/* í•˜ë‹¨ íƒ­: ì»¤ë®¤ë‹ˆí‹° í™œì„±í™” */}
      <BottomNav active="ì»¤ë®¤ë‹ˆí‹°" />
    </div>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(<CommunityScreen />);

</script>
</body>
</html>
